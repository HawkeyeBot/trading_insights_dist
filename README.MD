# Trading insights

This repository is meant to provide an easy-to-run (local) web-UI that provides insight into your account(s) activities on exchanges. It uses a custom script to retrieve data from one or more exchanges (via websocket and/or REST), which is then inserted into a database. 
A metabase container is then launched with a default configuration to display this information.

# Metabase configuration:

## Credentials
* First name: First
* Last name: Last
* Email: exchanges@dashboard.com
* Password: ExchangesDashboard1!
* Department: Department of Awesome

# Installation

## Prerequisites
1. A github personal access token, which can be generated here: https://github.com/settings/tokens
2. A hetzner API key, which can be generated by following these steps:
  * Log in to hetzer cloud: https://console.hetzner.cloud/projects
  * Go into the desired project > Security > API tokesn
  * Save this token, because you will need it later
3. Your public SSH key uploaded in Hetzner so you can log in to the control server:
  * Check if you already have a key on your local system:
    * If the files `~/.ssh/id_rsa` and `~/.ssh/id_rsa.pub` already exist, you can skip this step
    * If they don't exist yet, run the following command on your local machine: `ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa`
  * Log in to hetzer cloud: https://console.hetzner.cloud/projects
  * Go into the desired project -> Security -> SSH keys, push the button `Add SSH key`
    * upload the content of the file `~/.ssh/id_rsa.pub` in the field `SSH key`, select `Set as default key` and press the button `Add SSH key`

## Installation steps
4. On hetzner, create the cheapest VPS which will act as the deployment server
5. On your local machine, log in to the deployment server in a terminal:
  * `ssh root@<ip of deployment server>`
6. Execute the following commands on the deployment server:
  * `git clone https://github.com/HawkeyeBot/trading_insights.git`
    * This will ask you for your github username and the github personal access token created in step 1
  * `cd trading_insights`
  * `cp config1.json.bak config1.json` <<< repeat this step for config2.json and config3.json if needed
  * `./install.sh`
    * This will ask you for your hetzner API key created in step 2

This will take a while, and should finish with any error. After this completes, the dashboard should be online.

## Uninstallation steps
This step assumes that you've gone through the installation steps above. The steps below will completely remove all the VPSes.

From the root folder `trading_insights` on the deployment server, execute the command `./uninstall.sh`. This will ask you for your
hetzner API key created in step 2.

## Update steps
This step assumes that you've gone through the installation steps above. The steps below will remove all the dashboard and
scraper VPSes, but will leave the database with the scraper data intact. This allows you to update everything while not losing
previously stored data.

From the root folder `trading_insights` on the deployment server, execute the command `./update.sh`. This will ask you for your
hetzner API key created in step 2.